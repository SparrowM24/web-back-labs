{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 4{% endblock %}

{% block main %}
    <h1>–ó–∞–∫–∞–∑ –∑–µ—Ä–Ω–∞</h1>
    
    <div style="max-width: 600px; margin: 0 auto; padding: 20px; border: 2px solid #ddd; border-radius: 10px; background-color: #f9f9f9;">
        <h2 style="text-align: center; color: #333; margin-bottom: 30px;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        
        <form method="post">
            <div style="margin-bottom: 20px;">
                <label for="grain_type" style="display: block; margin-bottom: 8px; font-weight: bold; font-size: 16px;">
                    –¢–∏–ø –∑–µ—Ä–Ω–∞:
                </label>
                <select id="grain_type" name="grain_type" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–µ—Ä–Ω–∞ --</option>
                    <option value="barley" {{ 'selected' if grain_type == 'barley' else '' }}>–Ø—á–º–µ–Ω—å - 12 000 —Ä—É–±/—Ç</option>
                    <option value="oats" {{ 'selected' if grain_type == 'oats' else '' }}>–û–≤—ë—Å - 8 500 —Ä—É–±/—Ç</option>
                    <option value="wheat" {{ 'selected' if grain_type == 'wheat' else '' }}>–ü—à–µ–Ω–∏—Ü–∞ - 9 000 —Ä—É–±/—Ç</option>
                    <option value="rye" {{ 'selected' if grain_type == 'rye' else '' }}>–†–æ–∂—å - 15 000 —Ä—É–±/—Ç</option>
                </select>
            </div>
            
            <div style="margin-bottom: 25px;">
                <label for="weight" style="display: block; margin-bottom: 8px; font-weight: bold; font-size: 16px;">
                    –í–µ—Å (—Ç–æ–Ω–Ω—ã):
                </label>
                <input type="number" id="weight" name="weight" 
                       value="{{ request.form.weight if request.form.weight else '' }}"
                       min="0.1" step="0.1"
                       style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;"
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å –≤ —Ç–æ–Ω–Ω–∞—Ö">
            </div>
            
            {% if error %}
                <div style="color: #d32f2f; background-color: #ffebee; padding: 12px; border: 1px solid #f44336; border-radius: 4px; margin-bottom: 20px; font-size: 14px;">
                    <strong>–û—à–∏–±–∫–∞:</strong> {{ error }}
                </div>
            {% endif %}

            <button type="submit" style="width: 100%; padding: 12px; background-color: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold;">
                –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
            </button>
        </form>

        {% if success %}
            <div style="color: #2e7d32; background-color: #e8f5e9; padding: 20px; border: 1px solid #4caf50; border-radius: 4px; margin-top: 25px;">
                <h3 style="margin-top: 0; color: #2e7d32;">‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω</h3>
                <p style="font-size: 16px; margin: 10px 0;">
                    –í—ã –∑–∞–∫–∞–∑–∞–ª–∏ <strong>{{ grain_name }}</strong>.
                </p>
                <p style="font-size: 16px; margin: 10px 0;">
                    –í–µ—Å: <strong>{{ "%.1f"|format(weight) }} —Ç.</strong>
                </p>
                
                {% if discount > 0 %}
                    <div style="background-color: #fff3e0; padding: 15px; border-radius: 4px; margin: 15px 0;">
                        <p style="margin: 5px 0; color: #ef6c00;">
                            <strong>üéâ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å–∫–∏–¥–∫–∞ 10% –∑–∞ –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º!</strong>
                        </p>
                        <p style="margin: 5px 0; color: #ef6c00;">
                            –†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏: <strong>{{ "%.0f"|format(discount) }} —Ä—É–±.</strong>
                        </p>
                    </div>
                {% endif %}
                
                <p style="font-size: 18px; font-weight: bold; margin: 15px 0 0 0; color: #1b5e20;">
                    –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ: <strong>{{ "%.0f"|format(total_cost) }} —Ä—É–±.</strong>
                </p>
            </div>
        {% endif %}

        <div style="margin-top: 30px; padding: 20px; background-color: #e8eaf6; border-radius: 4px;">
            <h3 style="margin-top: 0; color: #303f9f;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–∞—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö:</h3>
            <ul style="margin-bottom: 0;">
                <li><strong>–Ø—á–º–µ–Ω—å:</strong> 12 000 —Ä—É–±/—Ç</li>
                <li><strong>–û–≤—ë—Å:</strong> 8 500 —Ä—É–±/—Ç</li>
                <li><strong>–ü—à–µ–Ω–∏—Ü–∞:</strong> 9 000 —Ä—É–±/—Ç</li>
                <li><strong>–†–æ–∂—å:</strong> 15 000 —Ä—É–±/—Ç</li>
            </ul>
            <p style="margin: 10px 0 0 0; font-style: italic; color: #5c6bc0;">
                üí° –ü—Ä–∏ –∑–∞–∫–∞–∑–µ –±–æ–ª–µ–µ 10 —Ç–æ–Ω–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–∫–∏–¥–∫–∞ 10%
            </p>
        </div>
    </div>
{% endblock %}